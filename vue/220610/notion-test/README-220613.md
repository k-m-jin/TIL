# [Pinia](https://pinia.vuejs.org/introduction.html)

í”¼ë‹ˆì•„ì˜ ê²½ìš° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë„ì…í•˜ê³  ì»´í¬ì§€ì…˜ APIë¥¼ ì ìš©í•˜ëŠ” ê²½ìš° ê·¸ ì¥ì ì´ í™•ì—°í•˜ê²Œ ë“¤ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 1. core concepts

**vuex**ì—ì„œëŠ”core conceptsë¡œ `state`,`Getters`, `Mutations`, `Actions`, `Modules` ì´ **5ê°€ì§€ ê°œë…**ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.

**Pinia**ì—ì„œëŠ” `state`,`Getters`,`action`ë¡œ **ì„¸ê°€ì§€ ê°œë…**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. (ëª¨ë“ˆí™”ëŠ” í•„ìˆ˜ì ìœ¼ë¡œ ì ìš©ë˜ê²Œ ë©ë‹ˆë‹¤.)

mutationsì´ ì—†ì–´ ê¶Œí•œì´ ì—†ì–´ ì‚¬ìš©í•˜ê¸° í¸í•œ ëŒ€ì‹ ì— ê·¸ë¡œì¸í•´ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì— ëŒ€í•œ ì±…ì„ì„ ì ¸ì•¼í•©ë‹ˆë‹¤.

## 2. pinia ì ìš©

### 2-1 piniaì„¤ì¹˜

```shell
$ npm i pinia
```

### 2-2 store>index.js

##### ğŸ¨ì°¨ì´ì  
vuexë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” storeí´ë”ë¥¼ ë§Œë“¤ì–´ ê·¸ ì•ˆì— index.jsë¼ëŠ” ê¸°ë³¸ íŒŒì¼ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ë§Œì•½, messageë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ëª¨ë“ˆí™”ë¥¼ í•˜ëŠ” ê²½ìš° storeí´ë” ì•ˆì—ëŠ” ëª¨ë“ˆì´ í•˜ë‚˜ë”ë¼ë„ message.jsì™€ index.jsíŒŒì¼ë¡œ ì´ 2ê°œì˜ íŒŒì¼ì´ ì¡´ì¬í•´ì•¼í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, **piniaëŠ” index.js ì—†ì´ ëª¨ë“ˆí™”ëœ íŒŒì¼ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.**

#### ğŸ¨ì°¨ì´ì  
ë˜í•œ vuexì—ì„œëŠ” ëª¨ë“ˆí™”ëœ íŒŒì¼ì˜ ìƒë‹¨ì— `namedspaced:true`ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ **í”¼ë‹ˆì•„ëŠ” ëª¨ë“ˆì´ ê¸°ë³¸ ì˜µì…˜**ì´ê¸°ì— ë”°ë¡œ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**store>message.js**

```js
import {defineStore} from 'pinia'

//ì´ë¦„ì„ ê°€ì§€ëŠ” ë‚´ë³´ë‚´ê¸°
//ì²«ë²ˆì¨° ì¸ìˆ˜ë¡œ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ëª¨ë“ˆì˜ ì´ë¦„ì„ ë„£ì–´ì¤˜ì•¼í•©ë‹ˆë‹¤
export const useMessageStore = defineStore('message'â­,{
  //í™”ì‚´í‘œí•¨ìˆ˜ë¡œ í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.
  state: () => ({
    message: 'Hello world!'
  }),
  getters: {
    reversedMessage(state) {
      return state.message.split('').reverse().join('')
    }
  },
  actions: {
    reverseMessage() {
      //thisë¡œ ì ‘ê·¼
      this.message = this.message.split('').reverse().join('')
    }
  },
})
```

>ğŸ”‘ì´ë¦„ì„ ê°€ì§€ëŠ” ë‚´ë³´ë‚´ê¸°ë¥¼ í•  ë•Œ ë³´í†µ ì´ë¦„ ì•ì— useë¥¼ ë¶™ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.


#### ğŸ¨ê³µí†µì  : state

vuexì—ì„œëŠ” mutationsì—ì„œ stateì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ stateë¼ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ piniaì—ì„œë„ gettersì—ì„œ stateì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ stateë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.


#### ğŸ¨ì°¨ì´ì  : context

vuexì—ì„œëŠ” actionsì˜ ë§¤ê°œë³€ìˆ˜ë¡œ context(={state,getters,commit,dsipatch})ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ piniaì—ì„œëŠ” thisë¥¼ í†µí•´ ë³´ë‹¤ í¸í•˜ê²Œ ì ‘ê·¼ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### 2-2 storeì˜ stateë¥¼ ê°€ì ¸ì˜¤ê¸°

#### ğŸ¨vuexì—ì„œëŠ”

vuexì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ stateì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

##### 1) ì²«ë²ˆì§¸ ë°©ë²•
```js
computed: {
  message() {
    return this.$store.state.message.message
  }
}
```

ë§Œì•½ ë§¤í•‘ì„ í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

##### 2) ë‘ë²ˆì¨° ë°©ë²•
```js
import {mapState} from 'vuex'

computed: {
  ...mapState('message', [
      message
    ]),
}
```

#### ğŸ¨piniaì—ì„œëŠ”

í•˜ì§€ë§Œ piniaì—ì„œëŠ” ì²«ë²ˆì§¸ ë°©ë²•ì€ ì‚¬ìš©ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

**about.vue**

```js
import {mapState} from 'pinia' //1
import {useMessageStore} from '~/store/message' //2

export default {
  computed: {
    ...mapState(useMessageStore, [ //3
      'message'
    ])
  }
}
```

1. mapStateì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë§ˆì°¬ê°€ì§€ë¡œ piniaì—ì„œ mapStateë¥¼ ê°€ì§€ê³  ì™€ ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤.

2. ë‹¨ í”¼ë‹ˆì•„ëŠ” ëª¨ë“  ê²ƒì´ ëª¨ë“ˆì´ê¸° ë•Œë¬¸ì— ê·¸ ëª¨ë“ˆì„ ì§ì ‘ê°€ì ¸ì™€ì•¼í•©ë‹ˆë‹¤.

3. ê·¸ë¦¬ê³  vuexì—ì„œëŠ” ëª¨ë“ˆì´ë¦„ì´ ë“¤ì–´ê°”ë˜ ìë¦¬ì— ëª¨ë“ˆì„ í†µì±„ë¡œ ì§‘ì–´ë„£ìŠµë‹ˆë‹¤

### 2-3 í”¼ë‹ˆì•„ ë“±ë¡í•˜ê¸°

**main.js**
```js
import { createApp } from 'vue'
import { createPinia } from 'pinia'âœ…
import router from './routes'
import '~/routes/guards'
import App from './App.vue'

createApp(App)
  .use(createPinia())âœ…í˜¸ì¶œí•©ë‹ˆë‹¤
  .use(router)
  .mount('#app')
```

### 2-4 ì—°ê²°í™•ì¸í•˜ê¸°

**About.vue**
```html
<template>
  <h1>About!</h1>
  <RouterLink to="/about/name">
    Name~
  </RouterLink>
  <RouterView />
  <div>{{ message }}</div>
</template>
```
![](https://velog.velcdn.com/images/0seo8/post/2de02b64-63c6-40cb-ab0a-7ffcef20d133/image.png)

### 2-5 storeì˜ getters ê°€ì ¸ì˜¤ê¸°

#### ğŸ¨vuexì—ì„œëŠ”

```js
import {mapState, mapGetters} from 'vuex'
```
ì™€ ê°™ì´ mapGettersë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤


#### ğŸ¨piniaì—ì„œëŠ”

getterë„ mapStateì—ì„œ ê°€ì§€ê³  ì˜µë‹ˆë‹¤.
```html
<template>
  <h1>About!</h1>
  <RouterLink to="/about/name">
    Name~
  </RouterLink>
  <RouterView />
  <div>{{ message }}</div>
  <div>{{ reversedMessage }}</div>
</template>
```
```js
<script>
import {mapState} from 'pinia'
import {useMessageStore} from '~/store/message'

export default {
  computed: {
    ...mapState(useMessageStore, [
      'message',
      'reversedMessage'
    ])
  }
}
</script>
```

![](https://velog.velcdn.com/images/0seo8/post/71d481a5-963f-4fea-93fc-b09ac186e193/image.png)

### 2-5 storeì˜ actions ê°€ì ¸ì˜¤ê¸°

#### ğŸ¨piniaì—ì„œëŠ”

mapActionsì—ì„œ actionsë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```html
<template>
  <h1>About!</h1>
  <RouterLink to="/about/name">
    Name~
  </RouterLink>
  <RouterView />
  <div>{{ message }}</div>
  <div>{{ reversedMessage }}</div>
  <button @click="reverseMessage">
    Reverse!!
  </button>
</template>
```
```js
<script>
import {mapState, mapActionsâœ…} from 'pinia'
import {useMessageStore} from '~/store/message'

export default {
  computed: {
    ...mapState(useMessageStore, [
      'message',
      'reversedMessage'
    ])
  },
  methods: {âœ…
    ...mapActions(useMessageStore,[
      'reverseMessage'
    ])
  }
}
</script>
```

### 2-6 mapStores

**mapState, mapActionsëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°œë…ì´ ìƒˆë¡œ ë‚˜ì™”ìŠµë‹ˆë‹¤.**

**ë“±ë¡í•˜ëŠ” ë°©ë²•**
```js
<script>
import {mapStores} from 'pinia'
import {useMessageStore} from '~/store/message'

export default {
  computed: {
    ...mapStores([useMessageStore]) 
  },
}
</script>
```

ìœ„ì™€ ê°™ì´ ë“±ë¡ì„ í•´ì¤ë‹ˆë‹¤.

**ì‚¬ìš©í•˜ëŠ” ë°©ë²•**
```html
<template>
  <h1>About!</h1>
  <RouterLink to="/about/name">
    Name~
  </RouterLink>
  <RouterView />
  <div>{{âœ… messageStore.message }}</div>
  <div>{{âœ… messageStore.reversedMessage }}</div>
  <button @click="âœ…messageStore.reverseMessage">
    Reverse!!
  </button>
</template>
```
`useMessageStore`ì—ì„œ useë¥¼ ëº€ ê°ì²´ë°ì´í„°ë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤.

`messageStore`ë¼ëŠ” ì´ë¦„ ë²”ìœ„ ì•ˆì—ì„œ ì‚¬ìš©ì„ í•˜ê¸° ë•Œë¬¸ì— ê´€ë¦¬ê°€ ì¡°ê¸ˆ ë” ìš©ì´í•©ë‹ˆë‹¤.

```html
<button @click="messageStore.message='HEROPY?!@'">
  HEROPY
</button>
```
ìœ„ì™€ ê°™ì´ stateì˜ ë°ì´í„°ë¥¼ ìˆ˜ì •í•´ë²„ë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

# Pinia2

## ğŸ¥ì§€ë‚œ ì‹œê°„ ëŒì•„ë³´ê¸°

### 1. gettersì™€ actionsì˜ storeì— ì ‘ê·¼ ë°©ë²•
```js
  getters: {
    reversedMessage(state) {
      return state.message.split('').reverse().join('')
    }
  },
  actions: {
    reverseMessage() {
      this.message = this.message.split('').reverse().join('')
    },
  }
```

ì™œ gettersì—ì„œëŠ” stateë¡œ ì ‘ê·¼ì„ í•˜ê³  actionsì—ì„œëŠ” thisë¡œ ì ‘ê·¼ì„ í•˜ëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆëŠ”ì§€ëŠ” ê°•ì‚¬ë‹˜ë„ ì˜ë¬¸ì…ë‹ˆë‹¤!

ì•„ë¬´íŠ¼ gettersì—ì„œëŠ” **state**í†µí•´ ì ‘ê·¼ì„ í•˜ë©° actionsì—ì„œëŠ” **this**ë¥¼ í†µí•´ ì ‘ê·¼ì„ í•©ë‹ˆë‹¤.


### 2. actionì—ì„œ gettersì— ì ‘ê·¼í•˜ëŠ” ë²•

actionì•ˆì—ì„œëŠ” ëª¨ë‘ thisë¥¼ í†µí•´ ì ‘ê·¼í•œë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. 
```js
actions: {
  reverseMessage() {
    this.message = this.message.split('').reverse().join('')
    //thisë¥¼ í†µí•´ ë°”ë¡œ helloWorldì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    this.helloWorld()
  },
    helloWorld() {
      console.log('Hello world')
    }
}
```


### 3. ë„¤ì„ìŠ¤í˜ì´ìŠ¤
#### About.vue

```html
<button @click="messageStore.message = 'HEROPY?!#'">
  HEROPY!
</button>
```

```js
import { mapStores } from 'pinia'
import { useMessageStore } from '~/store/message'

export default {
  computed: {
    ...mapStores([useMessageStore])
  }
}
```

`messageStore`ë¼ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í†µí•´ messageì— ë°”ë¡œ ì ‘ê·¼ì„ í•¨ìœ¼ë¡œì¨, messageì— ìˆëŠ” ê·¸ ìƒíƒœë¥¼ ê°±ì‹ í•œë‹¤ëŠ” ê²ƒì„ ë°”ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¦‰, `messageStore.message`ì—ì„œ messageëŠ” storeì—ì„œ ì˜¨ ë°ì´í„°ë¼ëŠ” ê²ƒì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**êµ¬ë¶„**
ë§Œì•½, mapStoresê°€ ì•„ë‹Œ mapStateë¡œ ë§¤í•‘ì„ í•œ í›„ `@click="message='HROPY?!#'"`ìœ¼ë¡œ ì‚¬ìš©ì„ í–ˆë‹¤ë©´ storeì—ì„œ ì˜¨ ë°ì´í„°ë¼ëŠ” ê²ƒì„ ë°”ë¡œ ì•Œê¸° í˜ë“¤ì—ˆì„ ê²ƒì…ë‹ˆë‹¤

í•˜ì§€ë§Œ mapStoresë¥¼ ê°€ì ¸ì™€ storesìì²´ë¥¼ ë§¤í•‘í•¨ìœ¼ë¡œì„œ messageStoreë¼ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨  ë°ì´í„°ë¥¼ ì¶”ì í•˜ëŠ”ë° ë§ì€ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¥1. $patch

ë§ˆì°¬ê°€ì§€ë¡œ `@click="messageStore.message = 'HEROPY?!#'"`ì™€ ê°™ì´ í• ë‹¹ì—°ì‚°ìë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë°”ë¡œ í• ë‹¹í•˜ë©´ ì¶”ì ì— ì–´ë ¤ì›€ì´ ìˆê¸° ë•Œë¬¸ì— `$patch`ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### 1-1 [Mutating the state](https://pinia.vuejs.org/core-concepts/state.html#mutating-the-state)

`$patch`ì—ëŠ” ë‘ê°€ì§€ ì‚¬ìš© ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.(1) patchëŠ” ê°ì²´ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” ê²ƒ ì™¸ì—ë„ (2)ë‹¤ë¥¸ ë°©ì‹(ì½œë°±í˜•ì‹)ì„ ì œê³µí•©ë‹ˆë‹¤.

#### 1ë²ˆ ë°©ë²•

```js
created(){
  this.messageStore.$patch({
    message: 'Good!',
  })
}
```
#### 2ë²ˆ ë°©ë²•

```js
this.messageStore.message='Good!'
```

ë‘˜ì˜ ì½”ë“œëŠ” ê°™ìŠµë‹ˆë‹¤. ë‹¨, ë°ì´í„° íŠ¸ë˜í‚¹ì„ ìœ„í•´ 1ë²ˆì²˜ëŸ¼ ì‘ì„±í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.


```js
cartStore.$patch((state) => {
  state.items.push({ name: 'shoes', quantity: 1 })
  state.hasChanged = true
})
```

ìœ„ ì½”ë“œëŠ” state(ìƒíƒœê°ì²´)ê°€ ë“¤ì–´ì˜¤ê¸° ë•Œë¬¸ì— stateê°ì²´ì— pushê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½, ì–´ë–¤ ìƒíƒœë¥¼ ê°±ì‹ í• ë•Œ ê·¸ ìƒíƒœë¥¼ ê³„ì‚°í•˜ëŠ” ë¡œì§ì´ ê¸¸ì–´ì§€ëŠ” ê²½ìš° ìœ„ì™€ ê°™ì´ ì½œë°±ì„ í†µí•´ ë¬¶ì–´ ì œê³µí•˜ë©´ ìƒíƒœê°€ ì–´ë””ì„œ ë³€ê²½ë˜ëŠ”ì§€ëŠ” ì½œë°±ì˜ì—­ë§Œ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°íŠ¸ë˜í‚¹ì— ìœ ë¦¬í•˜ë©° stateê°ì²´ì— pushê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

## ğŸ¥2. [$reset](https://pinia.vuejs.org/api/interfaces/pinia._StoreWithState.html#reset)

```html
  <div>{{ messageStore.count }}</div>
  <button @click="updateStore">
    HEROPY!
  </button>
```

```js
methods: {
    updateStore(){
      this.messageStore.$patch({
        message:'Good!!',
        count: 2
      })
    }
  }
```
**ì´ˆê¸°ê°’**
![](https://velog.velcdn.com/images/0seo8/post/df1f89d4-64c6-41d9-9c67-0b993707aa9d/image.png)

**resetì„ ì‚¬ìš©í•˜ë©´ ì´ˆê¸° ê°’ìœ¼ë¡œ ì–¸ì œë“ ì§€ ëŒì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

```html
<button @click="resetStore">
  RESET!
</button>
```

```js
  methods: {
    updateStore(){
      this.messageStore.$patch({
        message:'Good!!',
        count: 2
      })
    },
    resetStore() {
      this.messageStore.$reset()
    }
  }
```

vuexì—ì„œ ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ë©´ ì—¬ëŸ¬ëª¨ë¡œ ì‹ ê²½ì¨ì•¼í•˜ëŠ”ë°, piniaëŠ” resetê¸°ëŠ¥ì„ í†µí•´ ë³´ë‹¤ í¸ë¦¬í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì½”ë“œì „ì²´**
![](https://velog.velcdn.com/images/0seo8/post/4cdbba78-1566-4b28-9dbc-583abdd07403/image.png)



